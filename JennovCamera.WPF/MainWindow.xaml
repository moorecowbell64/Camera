<Window x:Class="JennovCamera.WPF.MainWindow"
        KeyDown="Window_KeyDown"
        KeyUp="Window_KeyUp"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Jennov PTZ Camera Control"
        Height="900" Width="1400"
        Background="{StaticResource BackgroundBrush}"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="*" MinWidth="320"/>
        </Grid.ColumnDefinitions>

        <!-- Left Panel - Video Display -->
        <Grid Grid.Column="0" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Video Display -->
            <Border Grid.Row="0"
                    BorderBrush="{StaticResource PrimaryBrush}"
                    BorderThickness="2"
                    Background="Black"
                    CornerRadius="5">
                <Grid>
                    <Image x:Name="VideoImage"
                           Stretch="Uniform"
                           RenderOptions.BitmapScalingMode="LowQuality"
                           MouseDown="VideoImage_MouseDown"
                           MouseUp="VideoImage_MouseUp"
                           MouseLeave="VideoImage_MouseLeave"
                           Cursor="Cross"/>
                    <TextBlock x:Name="NoVideoText"
                               Text="No Video Feed&#x0a;&#x0a;Click 'Connect' to start"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Foreground="White"
                               FontSize="18"
                               TextAlignment="Center"/>

                    <!-- Calibration Overlay -->
                    <Grid x:Name="CalibrationOverlay" Visibility="Collapsed">
                        <Rectangle Fill="#80000000"/>
                        <Canvas x:Name="CalibrationCanvas"
                                MouseDown="CalibrationCanvas_MouseDown"
                                Background="Transparent"/>
                        <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10,30,0,0">
                            <TextBlock x:Name="CalibrationInstructions"
                                       Text="CALIBRATION MODE"
                                       Foreground="White"
                                       FontSize="12"
                                       TextAlignment="Left"
                                       Padding="10"
                                       Background="#CC333333"/>
                        </StackPanel>
                        <TextBlock x:Name="CalibrationStepText"
                                   VerticalAlignment="Bottom"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,20"
                                   Foreground="Yellow"
                                   FontSize="14"
                                   FontWeight="Bold"
                                   TextAlignment="Center"
                                   Padding="10"
                                   Background="#CC333333"/>
                    </Grid>
                </Grid>
            </Border>

            <!-- Status Bar -->
            <Grid Grid.Row="1" Margin="0,10,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="ConnectionStatus"
                           Grid.Column="0"
                           Text="Disconnected"
                           Foreground="{StaticResource AccentRedBrush}"
                           FontWeight="Bold"
                           FontSize="14"
                           VerticalAlignment="Center"/>

                <TextBlock x:Name="FrameResolutionStatus"
                           Grid.Column="1"
                           Text="Resolution: --"
                           Foreground="{StaticResource PrimaryBrush}"
                           FontSize="14"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"/>

                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,20,0">
                    <TextBlock x:Name="StreamQualityStatus"
                               Text="Stream: --"
                               Foreground="{StaticResource PrimaryBrush}"
                               FontSize="14"
                               VerticalAlignment="Center"/>
                    <Button x:Name="QuickQualityToggle"
                            Content="Toggle"
                            Click="QuickQualityToggle_Click"
                            FontSize="10"
                            Padding="6,2"
                            Margin="10,0,0,0"
                            ToolTip="Toggle between 4K and SD quality"
                            IsEnabled="False"/>
                </StackPanel>

                <TextBlock x:Name="RecordingStatus"
                           Grid.Column="3"
                           Text="Not Recording"
                           Foreground="#888888"
                           FontSize="14"
                           VerticalAlignment="Center"/>
            </Grid>
        </Grid>

        <!-- Right Panel - Tabbed Controls -->
        <TabControl Grid.Column="1" Margin="5" Background="{StaticResource PanelBrush}"
                    BorderBrush="{StaticResource PrimaryBrush}">

            <!-- Controls Tab -->
            <TabItem Header="Controls">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="5">

                        <!-- Keyboard Shortcuts Info -->
                        <Expander Header="Keyboard Shortcuts" Margin="0,0,0,10" IsExpanded="False"
                                  Foreground="#888888">
                            <Border Background="#252525" CornerRadius="3" Padding="10" Margin="0,5,0,0">
                                <TextBlock Foreground="#AAAAAA" FontSize="11" TextWrapping="Wrap">
                                    <Run FontWeight="Bold" Foreground="White">PTZ Control:</Run><LineBreak/>
                                    Arrow Keys - Pan/Tilt<LineBreak/>
                                    +/- Keys - Zoom In/Out<LineBreak/>
                                    Space - Stop Movement<LineBreak/>
                                    <LineBreak/>
                                    <Run FontWeight="Bold" Foreground="White">Focus Control:</Run><LineBreak/>
                                    W - Focus Near<LineBreak/>
                                    S - Focus Far<LineBreak/>
                                    F - Auto Focus
                                </TextBlock>
                            </Border>
                        </Expander>

                        <!-- PTZ Controls -->
                        <GroupBox Header="PTZ Controls" x:Name="PTZControls" IsEnabled="False">
                            <StackPanel>
                                <!-- Speed Slider -->
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="Speed:" VerticalAlignment="Center"/>
                                    <Slider x:Name="SpeedSlider" Grid.Column="1"
                                            Minimum="0.1" Maximum="1.0" Value="1.0"
                                            VerticalAlignment="Center" Margin="10,0"
                                            ValueChanged="SpeedSlider_ValueChanged"/>
                                    <Label x:Name="SpeedLabel" Grid.Column="2" Content="1.0"
                                           Foreground="{StaticResource PrimaryBrush}" FontWeight="Bold"/>
                                </Grid>

                                <!-- Directional Pad -->
                                <Grid HorizontalAlignment="Center" Margin="0,10">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="60"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="60"/>
                                    </Grid.ColumnDefinitions>

                                    <Button Grid.Row="0" Grid.Column="1" Content="Up"
                                            PreviewMouseDown="UpButton_MouseDown"
                                            PreviewMouseUp="PTZButton_MouseUp"
                                            Margin="2"/>
                                    <Button Grid.Row="1" Grid.Column="0" Content="Left"
                                            PreviewMouseDown="LeftButton_MouseDown"
                                            PreviewMouseUp="PTZButton_MouseUp"
                                            Margin="2"/>
                                    <Button Grid.Row="1" Grid.Column="1" Content="Stop"
                                            Click="StopButton_Click"
                                            Background="{StaticResource AccentRedBrush}"
                                            Margin="2"/>
                                    <Button Grid.Row="1" Grid.Column="2" Content="Right"
                                            PreviewMouseDown="RightButton_MouseDown"
                                            PreviewMouseUp="PTZButton_MouseUp"
                                            Margin="2"/>
                                    <Button Grid.Row="2" Grid.Column="1" Content="Down"
                                            PreviewMouseDown="DownButton_MouseDown"
                                            PreviewMouseUp="PTZButton_MouseUp"
                                            Margin="2"/>
                                </Grid>

                                <!-- Zoom Controls -->
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Button Grid.Column="0" Content="Zoom +"
                                            PreviewMouseDown="ZoomInButton_MouseDown"
                                            PreviewMouseUp="PTZButton_MouseUp"
                                            Margin="2"/>
                                    <Button Grid.Column="1" Content="Zoom -"
                                            PreviewMouseDown="ZoomOutButton_MouseDown"
                                            PreviewMouseUp="PTZButton_MouseUp"
                                            Margin="2"/>
                                </Grid>

                                <!-- Focus Controls -->
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Button Grid.Column="0" Content="Focus Near"
                                            PreviewMouseDown="FocusNearButton_MouseDown"
                                            PreviewMouseUp="FocusButton_MouseUp"
                                            Margin="2"/>
                                    <Button Grid.Column="1" Content="Focus Far"
                                            PreviewMouseDown="FocusFarButton_MouseDown"
                                            PreviewMouseUp="FocusButton_MouseUp"
                                            Margin="2"/>
                                </Grid>
                                <Button Content="Auto Focus"
                                        Click="AutoFocusButton_Click"
                                        Margin="2,5,2,0"
                                        Background="{StaticResource AccentGreenBrush}"
                                        Foreground="White"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Click-to-Center Debug -->
                        <GroupBox Header="Click Travel (Calibration)">
                            <StackPanel>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="50"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="Scale:" VerticalAlignment="Center"/>
                                    <Slider x:Name="TravelSlider" Grid.Column="1"
                                            Minimum="1000" Maximum="2500" Value="1700"
                                            TickFrequency="50" IsSnapToTickEnabled="True"
                                            VerticalAlignment="Center" Margin="10,0"
                                            ValueChanged="TravelSlider_ValueChanged"/>
                                    <TextBlock x:Name="TravelValueLabel" Grid.Column="2"
                                               Text="1700" VerticalAlignment="Center"
                                               Foreground="{StaticResource PrimaryBrush}"
                                               FontWeight="Bold" FontSize="14"/>
                                </Grid>
                                <Button Content="Start Calibration"
                                        Click="StartCalibration_Click"
                                        Background="{StaticResource AccentOrangeBrush}"
                                        Foreground="White"
                                        Margin="0,10,0,5"
                                        Padding="10,5"/>
                                <TextBlock Text="Click targets to auto-tune the travel distance."
                                           Foreground="#888888" FontSize="10" Margin="5,0,5,0"
                                           TextWrapping="Wrap"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Presets -->
                        <GroupBox Header="Presets" x:Name="PresetsGroup" IsEnabled="False">
                            <StackPanel>
                                <!-- Quick Preset Buttons -->
                                <Label Content="Quick Presets:" Margin="0,0,0,2"/>
                                <UniformGrid Rows="1" Columns="4" Margin="0,0,0,10">
                                    <Button Content="1" Click="QuickPreset_Click" Tag="1"
                                            ToolTip="Go to Preset 1"/>
                                    <Button Content="2" Click="QuickPreset_Click" Tag="2"
                                            ToolTip="Go to Preset 2" Margin="2,0,0,0"/>
                                    <Button Content="3" Click="QuickPreset_Click" Tag="3"
                                            ToolTip="Go to Preset 3" Margin="2,0,0,0"/>
                                    <Button Content="4" Click="QuickPreset_Click" Tag="4"
                                            ToolTip="Go to Preset 4" Margin="2,0,0,0"/>
                                </UniformGrid>

                                <!-- Direct Preset Number Input -->
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="Go to #:" VerticalAlignment="Center"/>
                                    <TextBox x:Name="PresetNumberInput" Grid.Column="1"
                                             Text="1" MaxLength="3"
                                             VerticalContentAlignment="Center"
                                             KeyDown="PresetNumberInput_KeyDown"
                                             ToolTip="Enter preset number (1-255) and press Enter"/>
                                    <Button Grid.Column="2" Content="Go" Margin="5,0,0,0"
                                            Click="GotoPresetNumber_Click"/>
                                </Grid>

                                <!-- Preset Dropdown (for presets 5-8) -->
                                <Expander Header="More Presets (5-8)" IsExpanded="False" Margin="0,0,0,5">
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <ComboBox x:Name="PresetCombo" SelectedIndex="0" Margin="0,0,5,0">
                                            <ComboBoxItem Content="5"/>
                                            <ComboBoxItem Content="6"/>
                                            <ComboBoxItem Content="7"/>
                                            <ComboBoxItem Content="8"/>
                                        </ComboBox>
                                        <Button Grid.Column="1" Content="Go"
                                                Click="GotoPresetButton_Click"/>
                                    </Grid>
                                </Expander>
                            </StackPanel>
                        </GroupBox>

                        <!-- Recording -->
                        <GroupBox Header="Recording" x:Name="RecordingGroup" IsEnabled="False">
                            <StackPanel>
                                <Label Content="Save Location:" Margin="0,0,0,2"/>
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox x:Name="RecordingFolderText"
                                             IsReadOnly="True"
                                             Text="(Click Browse)"
                                             VerticalContentAlignment="Center"
                                             Height="28"/>
                                    <Button Grid.Column="1" Content="Browse"
                                            Click="BrowseRecordingFolder_Click"
                                            Width="60" Margin="5,0,0,0"/>
                                </Grid>
                                <Button x:Name="RecordButton"
                                        Content="Start Recording"
                                        Click="RecordButton_Click"
                                        Height="40"
                                        Margin="0,0,0,5"/>
                                <StackPanel x:Name="StoppingIndicator" Orientation="Horizontal"
                                            Visibility="Collapsed" Margin="0,0,0,5">
                                    <TextBlock Text="Stopping" Foreground="Orange" FontSize="11"
                                               VerticalAlignment="Center"/>
                                    <TextBlock x:Name="StoppingDots" Text="..." Foreground="Orange"
                                               FontSize="11" VerticalAlignment="Center"/>
                                </StackPanel>
                                <TextBlock x:Name="RecordingSavedText"
                                           Text=""
                                           Foreground="LimeGreen" FontSize="10"
                                           TextWrapping="Wrap"
                                           Margin="0,0,0,5"/>
                                <TextBlock x:Name="RecordingSegmentInfo"
                                           Text="30min segments, 10s overlap"
                                           Foreground="Gray" FontSize="11"
                                           Margin="0,0,0,5"/>
                                <Button x:Name="SnapshotButton"
                                        Content="Take Snapshot"
                                        Click="SnapshotButton_Click"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Audio -->
                        <GroupBox Header="Audio" x:Name="AudioGroup" IsEnabled="False">
                            <StackPanel>
                                <Button x:Name="AudioButton"
                                        Content="Enable Audio"
                                        Click="AudioButton_Click"
                                        Height="40"
                                        Margin="0,0,0,10"/>
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="Volume:" VerticalAlignment="Center"/>
                                    <Slider x:Name="VolumeSlider" Grid.Column="1"
                                            Minimum="0" Maximum="100" Value="80"
                                            VerticalAlignment="Center" Margin="10,0"
                                            ValueChanged="VolumeSlider_ValueChanged"/>
                                    <Label x:Name="VolumeLabel" Grid.Column="2" Content="80%"
                                           Foreground="{StaticResource PrimaryBrush}" FontWeight="Bold" Width="45"/>
                                </Grid>
                                <Button x:Name="MuteButton"
                                        Content="Mute"
                                        Click="MuteButton_Click"/>
                                <TextBlock x:Name="AudioStatusText"
                                           Text="Audio: Disabled"
                                           Foreground="#888888"
                                           FontSize="11"
                                           Margin="5,10,5,0"
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Settings Tab -->
            <TabItem Header="Settings">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="5">

                        <!-- Connection Controls -->
                        <GroupBox Header="Connection">
                            <StackPanel>
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <Label Grid.Row="0" Grid.Column="0" Content="IP:" VerticalAlignment="Center"/>
                                    <TextBox x:Name="CameraIpText" Grid.Row="0" Grid.Column="1"
                                             Text="192.168.50.224" Margin="5"/>

                                    <Label Grid.Row="1" Grid.Column="0" Content="User:" VerticalAlignment="Center"/>
                                    <TextBox x:Name="UsernameText" Grid.Row="1" Grid.Column="1"
                                             Text="admin" Margin="5"/>

                                    <Label Grid.Row="2" Grid.Column="0" Content="Pass:" VerticalAlignment="Center"/>
                                    <PasswordBox x:Name="PasswordText" Grid.Row="2" Grid.Column="1"
                                                 Margin="5" Background="#1E1E1E" Foreground="White"
                                                 BorderBrush="{StaticResource PrimaryBrush}"
                                                 KeyDown="PasswordText_KeyDown"/>
                                </Grid>

                                <Button x:Name="ConnectButton"
                                        Content="Connect Camera"
                                        Click="ConnectButton_Click"
                                        Height="40"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Stream Settings -->
                        <GroupBox Header="Stream Quality" x:Name="StreamSettingsGroup" IsEnabled="False">
                            <StackPanel>
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="Quality:" VerticalAlignment="Center"/>
                                    <ComboBox x:Name="StreamQualityCombo" Grid.Column="1" Margin="5"
                                              SelectionChanged="StreamQualityCombo_SelectionChanged">
                                        <ComboBoxItem Content="Main - 4K (3840x2160)" Tag="Main"/>
                                        <ComboBoxItem Content="Sub - SD (720x480)" Tag="Sub"/>
                                    </ComboBox>
                                </Grid>
                                <TextBlock x:Name="StreamUrlText"
                                           Text="RTSP URL: --"
                                           Foreground="#888888"
                                           FontSize="11"
                                           TextWrapping="Wrap"
                                           Margin="5"/>
                                <Button Content="Apply Stream Quality"
                                        Click="ApplyStreamQuality_Click"
                                        Margin="0,10,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Video Encoder Settings -->
                        <GroupBox Header="Video Encoder" x:Name="EncoderSettingsGroup" IsEnabled="False">
                            <StackPanel>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <Label Grid.Row="0" Grid.Column="0" Content="Resolution:" VerticalAlignment="Center"/>
                                    <ComboBox x:Name="ResolutionCombo" Grid.Row="0" Grid.Column="1" Margin="5">
                                        <ComboBoxItem Content="3840x2160 (4K)" Tag="3840x2160"/>
                                        <ComboBoxItem Content="2560x1440 (QHD)" Tag="2560x1440"/>
                                        <ComboBoxItem Content="1920x1080 (1080p)" Tag="1920x1080"/>
                                        <ComboBoxItem Content="1280x720 (720p)" Tag="1280x720"/>
                                    </ComboBox>

                                    <Label Grid.Row="1" Grid.Column="0" Content="Frame Rate:" VerticalAlignment="Center"/>
                                    <ComboBox x:Name="FrameRateCombo" Grid.Row="1" Grid.Column="1" Margin="5">
                                        <ComboBoxItem Content="60 fps" Tag="60"/>
                                        <ComboBoxItem Content="30 fps" Tag="30"/>
                                        <ComboBoxItem Content="20 fps" Tag="20"/>
                                        <ComboBoxItem Content="15 fps" Tag="15"/>
                                        <ComboBoxItem Content="10 fps" Tag="10"/>
                                    </ComboBox>

                                    <Label Grid.Row="2" Grid.Column="0" Content="Bitrate:" VerticalAlignment="Center"/>
                                    <ComboBox x:Name="BitrateCombo" Grid.Row="2" Grid.Column="1" Margin="5">
                                        <ComboBoxItem Content="Auto (0)" Tag="0"/>
                                        <ComboBoxItem Content="8000 kbps" Tag="8000"/>
                                        <ComboBoxItem Content="6000 kbps" Tag="6000"/>
                                        <ComboBoxItem Content="4000 kbps" Tag="4000"/>
                                        <ComboBoxItem Content="2000 kbps" Tag="2000"/>
                                    </ComboBox>

                                    <Label Grid.Row="3" Grid.Column="0" Content="Profile:" VerticalAlignment="Center"/>
                                    <ComboBox x:Name="ProfileCombo" Grid.Row="3" Grid.Column="1" Margin="5">
                                        <ComboBoxItem Content="High" Tag="High"/>
                                        <ComboBoxItem Content="Main" Tag="Main"/>
                                        <ComboBoxItem Content="Baseline" Tag="Baseline"/>
                                    </ComboBox>
                                </Grid>

                                <Button Content="Load Current Settings"
                                        Click="LoadEncoderSettings_Click"
                                        Margin="0,10,0,5"/>
                                <Button Content="Apply Encoder Settings"
                                        Click="ApplyEncoderSettings_Click"
                                        Background="{StaticResource AccentOrangeBrush}"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- OSD Settings -->
                        <GroupBox Header="OSD (On-Screen Display)" x:Name="OSDSettingsGroup" IsEnabled="False">
                            <StackPanel>
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="Camera Title:" VerticalAlignment="Center"/>
                                    <TextBox x:Name="OsdTitleText" Grid.Column="1" Margin="5"
                                             Text="Camera"/>
                                </Grid>

                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="Position:" VerticalAlignment="Center"/>
                                    <ComboBox x:Name="OsdPositionCombo" Grid.Column="1" Margin="5">
                                        <ComboBoxItem Content="Upper Left" Tag="UpperLeft"/>
                                        <ComboBoxItem Content="Upper Right" Tag="UpperRight"/>
                                        <ComboBoxItem Content="Lower Left" Tag="LowerLeft"/>
                                        <ComboBoxItem Content="Lower Right" Tag="LowerRight"/>
                                    </ComboBox>
                                </Grid>

                                <Button Content="Load Current OSD"
                                        Click="LoadOsdSettings_Click"
                                        Margin="0,0,0,5"/>
                                <Button Content="Apply OSD Settings"
                                        Click="ApplyOsdSettings_Click"
                                        Background="{StaticResource AccentOrangeBrush}"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Device Info -->
                        <GroupBox Header="Device Information" x:Name="DeviceInfoGroup" IsEnabled="False">
                            <StackPanel>
                                <TextBlock x:Name="DeviceInfoText"
                                           Text="Connect to view device info..."
                                           Foreground="#AAAAAA"
                                           FontSize="12"
                                           TextWrapping="Wrap"/>
                                <Button Content="Refresh Device Info"
                                        Click="RefreshDeviceInfo_Click"
                                        Margin="0,10,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- FFmpeg Settings -->
                        <GroupBox Header="FFmpeg (Recording)">
                            <StackPanel>
                                <TextBlock x:Name="FFmpegStatusText"
                                           Text="FFmpeg: Checking..."
                                           Foreground="#AAAAAA"
                                           FontSize="12"
                                           Margin="0,0,0,10"/>
                                <Label Content="Custom Path (optional):" Margin="0,0,0,2"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox x:Name="FFmpegPathText"
                                             Text=""
                                             VerticalContentAlignment="Center"
                                             Height="28"/>
                                    <Button Grid.Column="1" Content="Browse"
                                            Click="BrowseFFmpegPath_Click"
                                            Width="60" Margin="5,0,0,0"/>
                                </Grid>
                                <Button Content="Detect FFmpeg"
                                        Click="DetectFFmpeg_Click"
                                        Margin="0,10,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- About -->
                        <GroupBox Header="About">
                            <StackPanel>
                                <TextBlock FontWeight="Bold" Foreground="White" FontSize="14">
                                    Jennov PTZ Camera Control
                                </TextBlock>
                                <TextBlock Foreground="#888888" FontSize="12" Margin="0,5,0,0">
                                    Version 1.0.0
                                </TextBlock>
                                <TextBlock Foreground="#AAAAAA" FontSize="11" TextWrapping="Wrap" Margin="0,10,0,0">
                                    Control Jennov PTZ cameras via ONVIF protocol.
                                    Features: PTZ control, 4K streaming, recording,
                                    presets, focus control, and more.
                                </TextBlock>
                                <TextBlock Foreground="#666666" FontSize="10" Margin="0,10,0,0">
                                    Built with .NET 8, WPF, OpenCvSharp, LibVLCSharp
                                </TextBlock>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

        </TabControl>
    </Grid>
</Window>
